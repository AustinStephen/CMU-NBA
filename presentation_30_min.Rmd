---
title: "<span style='font-size: 70px'>Measuring and Predicting Player Fatigue in the NBA </style>"
author: "<span style='font-size: 35px'>Austin Stephen, Matthew Yep and Grace Fain </style>"
date: "<span style='font-size: 35px'> 7/13/2021 </style>"
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  cache = FALSE,
  message = FALSE,
  warning = FALSE
  )
library(readr)
library(dplyr)
library(tidyverse)
library(gt)
library(xaringanthemer)
library(teamcolors)
library(usmap)
library(ggplot2)
library(maps)
library(mapdata)
library(airball)
library(gridExtra)
library(png)
library(grid)

 
```

```{r xaringan-themer, include=FALSE, warning=FALSE }

visitors <- read_csv("./matthew_data/visitors.csv")
data1415 <- read_csv("./matthew_data/regseason1415.csv")
datos <- read_csv("./matthew_data/map1415data.csv")

style_mono_accent(base_color = "#cc002c",
  white_color = "#e6e6e6",
  background_color = "#b3b3b3",
  base_font_size = "28px"
  )
```

## Why Fatigue?

- Injury Prevention  

- Optimized Performance 

???
Very clearly established by the lit  

"Early identification and subsequent management of fatigue may prevent detrimental physical and physiological adaptations often associated with injury and enhance athletic performance and player availability"
Edwards et al The National Center for Biotechnology Information

--

```{r fig.height = 4, out.extra = 'style= "border:solid; border-color: #666666 "' }
img <- readPNG("img/fatigue.png")
 grid.raster(img)

```

???
Image courtsey of Taylor et al.

---

## Project Objectives 

1. Measure player fatigue  

???
Identify a proxy for fatigue and link it to in game performance.

--
  
2. Build a model that predict the impact of fatigue on a given 
game or multi-game sequence.  


???
This model can used by teams to examine their roster and match-ups and gain insights into 
how differnt factors are influencing their teams performance

---

## What is Fatigue

- Cannot use direct measures  

--

- Identify a proxy

???
You cannot identify a proxy for something you don't understand.

More concrete on fatigue: 
"the decline in objective performance measures derived from the capacity 
of the nervous system and contractile properties of muscles over time"
Edwards et al. The National Center for Biotechnology Information

In a perfect world we would directly measure an NBA players internal homeostasis
either with hematological techniques or with sensors that measure heart rate. However, players cannot wear heart rate monitors or tracking equipment in games and we certainly don't have data about in/post-game blood samples so we need a proxy to measure how fatigued a player was by in game events.


---

## Proxy for Fatigue

- In-game distance  

- Between game distance

???
2 major sources for measuring volume of strain that could induce player fatigue.


---

## Proxy for Fatigue   

- In-game distance  

```{r}
 tracking_player <- read_csv(
   "data/in_game_distance_data/tracking_by_player_season_daily_2018_19.csv")


 tracking_player %>%
   select(c("player_name","date","min", "dist_miles","dist_miles_off", "dist_miles_def",
            "avg_speed","avg_speed_off","avg_speed_def")) %>%
   rename("Name" = player_name,
          "Distance (mi)" = dist_miles,
          "Distance Offense"  = dist_miles_off,
          "Distance Defense" = dist_miles_def,
          "Speed (mph)" = avg_speed,
          "Speed Offense" = avg_speed_off,
          "Speed Defense" = avg_speed_def,
          "Date" = date,
          "Min" = min) %>%
   slice(1:4) %>%
   gt() %>%
   tab_header(
    title = md("**Distance By Player Individual Games**")
  ) %>%
  tab_source_note(md("Data courtesy of nba.com and Second Spectrum")) %>%
  opt_table_outline( style = "solid", width = px(5), color = "#666666")%>%
  tab_options(table.width = pct(80))
```

???
3 important things
Gen by computer vision  
Game by game  
Player level  


---

## Proxy for Fatigue

- In-game distance  

```{r}
tracking_team <- read_csv(
  "data/in_game_distance_data/tracking_by_team_season_summaries_2013_to_20.csv")

 tracking_team %>%
   select(c("team_name","w","l", "dist_miles","dist_miles_off", "dist_miles_def",
            "avg_speed","avg_speed_off","avg_speed_def")) %>%
   rename("Team" = team_name,
          "Distance (mi)" = dist_miles,
          "Distance Offense"  = dist_miles_off,
          "Distance Defense" = dist_miles_def,
          "Speed (mph)" = avg_speed,
          "Speed Offense" = avg_speed_off,
          "Speed Defense" = avg_speed_def) %>%
   slice(1:4) %>%
   gt() %>%
   tab_header(
    title = md("**Season Distance By Team**")
  ) %>%
  tab_source_note(md("Data courtesy of nba.com and Second Spectrum")) %>%
  opt_table_outline( style = "solid", width = px(5), color = "#666666") %>%
  tab_options(table.width = pct(80))
```

???
2 key differences 
Season summaries 
Team level

---

